{"pageProps":{"layoutProps":{"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Terraform","url":"/terraform"},{"title":"CDK for Terraform","url":"/terraform/cdktf","isCurrentPage":false},{"title":"Examples and Guides"},{"title":"Refactoring Stacks","url":"/terraform/cdktf/examples-and-guides/refactoring","isCurrentPage":true}],"sidebarNavDataLevels":[{"levelButtonProps":{"levelDownButtonText":"Terraform Home"},"menuItems":[{"leadingIconName":"home","title":"HashiCorp Developer","href":"/"},{"leadingIconName":"guide","title":"Tutorials","href":"/tutorials"},{"divider":true},{"heading":"Products"},{"leadingIconName":"hcp","title":"HashiCorp Cloud Platform","href":"/hcp"},{"leadingIconName":"terraform","title":"Terraform","href":"/terraform"},{"leadingIconName":"packer","title":"Packer","href":"/packer"},{"leadingIconName":"consul","title":"Consul","href":"/consul"},{"leadingIconName":"vault","title":"Vault","href":"/vault"},{"leadingIconName":"boundary","title":"Boundary","href":"/boundary"},{"leadingIconName":"nomad","title":"Nomad","href":"/nomad"},{"leadingIconName":"waypoint","title":"Waypoint","href":"/waypoint"},{"leadingIconName":"vagrant","title":"Vagrant","href":"/vagrant"}],"showFilterInput":false,"title":"Main Menu"},{"levelButtonProps":{"levelUpButtonText":"Main Menu","levelDownButtonText":"Previous"},"menuItems":[{"title":"Terraform","fullPath":"/terraform","theme":"terraform"},{"title":"Install","fullPath":"/terraform/install"},{"title":"Tutorials","fullPath":"/terraform/tutorials"},{"title":"Documentation","isOpen":true,"routes":[{"title":"About the Docs","fullPath":"/terraform/docs"},{"title":"Configuration Language","fullPath":"/terraform/language"},{"title":"Terraform CLI","fullPath":"/terraform/cli"},{"title":"HCP Terraform","fullPath":"/terraform/cloud-docs"},{"title":"Terraform Enterprise","fullPath":"/terraform/enterprise"},{"title":"CDK for Terraform","fullPath":"/terraform/cdktf"},{"title":"Provider Use","fullPath":"/terraform/language/providers"},{"title":"Plugin Development","fullPath":"/terraform/plugin"},{"title":"Registry Publishing","fullPath":"/terraform/registry"},{"title":"Integration Program","fullPath":"/terraform/docs/partnerships"}]}],"showFilterInput":false,"title":"Terraform","visuallyHideTitle":true},{"backToLinkProps":{"text":"Terraform Home","href":"/terraform"},"levelButtonProps":{"levelUpButtonText":"Terraform Home"},"menuItems":[{"title":"CDK for Terraform","fullPath":"/terraform/cdktf","theme":"terraform"},{"title":"Get Started","href":"/terraform/tutorials/cdktf/cdktf-install","id":"sidebar-nav-item-2"},{"title":"Concepts","routes":[{"title":"Architecture","path":"concepts/cdktf-architecture","filePath":"../docs/cdktf/concepts/cdktf-architecture.mdx","fullPath":"/terraform/cdktf/concepts/cdktf-architecture","id":"sidebar-nav-item-4"},{"title":"HCL Interoperability","path":"concepts/hcl-interoperability","filePath":"../docs/cdktf/concepts/hcl-interoperability.mdx","fullPath":"/terraform/cdktf/concepts/hcl-interoperability","id":"sidebar-nav-item-5"},{"title":"Constructs","path":"concepts/constructs","filePath":"../docs/cdktf/concepts/constructs.mdx","fullPath":"/terraform/cdktf/concepts/constructs","id":"sidebar-nav-item-6"},{"title":"Providers","path":"concepts/providers","filePath":"../docs/cdktf/concepts/providers.mdx","fullPath":"/terraform/cdktf/concepts/providers","id":"sidebar-nav-item-7"},{"title":"Resources","path":"concepts/resources","filePath":"../docs/cdktf/concepts/resources.mdx","fullPath":"/terraform/cdktf/concepts/resources","id":"sidebar-nav-item-8"},{"title":"Modules","path":"concepts/modules","filePath":"../docs/cdktf/concepts/modules.mdx","fullPath":"/terraform/cdktf/concepts/modules","id":"sidebar-nav-item-9"},{"title":"Data Sources","path":"concepts/data-sources","filePath":"../docs/cdktf/concepts/data-sources.mdx","fullPath":"/terraform/cdktf/concepts/data-sources","id":"sidebar-nav-item-10"},{"title":"Variables and Outputs","path":"concepts/variables-and-outputs","filePath":"../docs/cdktf/concepts/variables-and-outputs.mdx","fullPath":"/terraform/cdktf/concepts/variables-and-outputs","id":"sidebar-nav-item-11"},{"title":"Functions","path":"concepts/functions","filePath":"../docs/cdktf/concepts/functions.mdx","fullPath":"/terraform/cdktf/concepts/functions","id":"sidebar-nav-item-12"},{"title":"Iterators","path":"concepts/iterators","filePath":"../docs/cdktf/concepts/iterators.mdx","fullPath":"/terraform/cdktf/concepts/iterators","id":"sidebar-nav-item-13"},{"title":"Remote Backends","path":"concepts/remote-backends","filePath":"../docs/cdktf/concepts/remote-backends.mdx","fullPath":"/terraform/cdktf/concepts/remote-backends","id":"sidebar-nav-item-14"},{"title":"Aspects","path":"concepts/aspects","filePath":"../docs/cdktf/concepts/aspects.mdx","fullPath":"/terraform/cdktf/concepts/aspects","id":"sidebar-nav-item-15"},{"title":"Assets","path":"concepts/assets","filePath":"../docs/cdktf/concepts/assets.mdx","fullPath":"/terraform/cdktf/concepts/assets","id":"sidebar-nav-item-16"},{"title":"Tokens","path":"concepts/tokens","filePath":"../docs/cdktf/concepts/tokens.mdx","fullPath":"/terraform/cdktf/concepts/tokens","id":"sidebar-nav-item-17"},{"title":"Stacks","path":"concepts/stacks","filePath":"../docs/cdktf/concepts/stacks.mdx","fullPath":"/terraform/cdktf/concepts/stacks","id":"sidebar-nav-item-18"}],"id":"sidebar-nav-item-3"},{"title":"Examples and Guides","routes":[{"title":"Examples","path":"examples-and-guides/examples","filePath":"../docs/cdktf/examples-and-guides/examples.mdx","fullPath":"/terraform/cdktf/examples-and-guides/examples","id":"sidebar-nav-item-20"},{"title":"Refactoring Stacks","path":"examples-and-guides/refactoring","filePath":"../docs/cdktf/examples-and-guides/refactoring.mdx","fullPath":"/terraform/cdktf/examples-and-guides/refactoring","id":"sidebar-nav-item-21"}],"id":"sidebar-nav-item-19"},{"title":"Create and Deploy Applications","routes":[{"title":"Project Setup","path":"create-and-deploy/project-setup","filePath":"../docs/cdktf/create-and-deploy/project-setup.mdx","fullPath":"/terraform/cdktf/create-and-deploy/project-setup","id":"sidebar-nav-item-23"},{"title":"Configuration File","path":"create-and-deploy/configuration-file","filePath":"../docs/cdktf/create-and-deploy/configuration-file.mdx","fullPath":"/terraform/cdktf/create-and-deploy/configuration-file","id":"sidebar-nav-item-24"},{"title":"Best Practices","path":"create-and-deploy/best-practices","filePath":"../docs/cdktf/create-and-deploy/best-practices.mdx","fullPath":"/terraform/cdktf/create-and-deploy/best-practices","id":"sidebar-nav-item-25"},{"title":"Environment Variables","path":"create-and-deploy/environment-variables","filePath":"../docs/cdktf/create-and-deploy/environment-variables.mdx","fullPath":"/terraform/cdktf/create-and-deploy/environment-variables","id":"sidebar-nav-item-26"},{"title":"HCP Terraform","path":"create-and-deploy/hcp-terraform","filePath":"../docs/cdktf/create-and-deploy/hcp-terraform.mdx","fullPath":"/terraform/cdktf/create-and-deploy/hcp-terraform","id":"sidebar-nav-item-27"},{"title":"Deployment Patterns","path":"create-and-deploy/deployment-patterns","filePath":"../docs/cdktf/create-and-deploy/deployment-patterns.mdx","fullPath":"/terraform/cdktf/create-and-deploy/deployment-patterns","id":"sidebar-nav-item-28"},{"title":"Performance","path":"create-and-deploy/performance","filePath":"../docs/cdktf/create-and-deploy/performance.mdx","fullPath":"/terraform/cdktf/create-and-deploy/performance","id":"sidebar-nav-item-29"},{"title":"Remote Templates","path":"create-and-deploy/remote-templates","filePath":"../docs/cdktf/create-and-deploy/remote-templates.mdx","fullPath":"/terraform/cdktf/create-and-deploy/remote-templates","id":"sidebar-nav-item-30"},{"title":"AWS Adapter [preview]","path":"create-and-deploy/aws-adapter","filePath":"../docs/cdktf/create-and-deploy/aws-adapter.mdx","fullPath":"/terraform/cdktf/create-and-deploy/aws-adapter","id":"sidebar-nav-item-31"}],"id":"sidebar-nav-item-22"},{"title":"Develop Custom Constructs","routes":[{"title":"Design","path":"develop-custom-constructs/construct-design","filePath":"../docs/cdktf/develop-custom-constructs/construct-design.mdx","fullPath":"/terraform/cdktf/develop-custom-constructs/construct-design","id":"sidebar-nav-item-33"},{"title":"Publishing and Distribution","path":"develop-custom-constructs/publishing-and-distribution","filePath":"../docs/cdktf/develop-custom-constructs/publishing-and-distribution.mdx","fullPath":"/terraform/cdktf/develop-custom-constructs/publishing-and-distribution","id":"sidebar-nav-item-34"}],"id":"sidebar-nav-item-32"},{"title":"Test and Debug","routes":[{"title":"Unit Tests","path":"test/unit-tests","filePath":"../docs/cdktf/test/unit-tests.mdx","fullPath":"/terraform/cdktf/test/unit-tests","id":"sidebar-nav-item-36"},{"title":"Debugging","path":"test/debugging","filePath":"../docs/cdktf/test/debugging.mdx","fullPath":"/terraform/cdktf/test/debugging","id":"sidebar-nav-item-37"}],"id":"sidebar-nav-item-35"},{"title":"CLI Reference","routes":[{"title":"CLI Configuration","path":"cli-reference/cli-configuration","filePath":"../docs/cdktf/cli-reference/cli-configuration.mdx","fullPath":"/terraform/cdktf/cli-reference/cli-configuration","id":"sidebar-nav-item-39"},{"title":"Commands","path":"cli-reference/commands","filePath":"../docs/cdktf/cli-reference/commands.mdx","fullPath":"/terraform/cdktf/cli-reference/commands","id":"sidebar-nav-item-40"}],"id":"sidebar-nav-item-38"},{"title":"API Reference","routes":[{"title":"Overview","path":"api-reference/overview","filePath":"../docs/cdktf/api-reference/overview.mdx","fullPath":"/terraform/cdktf/api-reference/overview","id":"sidebar-nav-item-42"},{"title":"Typescript","path":"api-reference/typescript","filePath":"../docs/cdktf/api-reference/typescript.mdx","fullPath":"/terraform/cdktf/api-reference/typescript","id":"sidebar-nav-item-43"},{"title":"Python","path":"api-reference/python","filePath":"../docs/cdktf/api-reference/python.mdx","fullPath":"/terraform/cdktf/api-reference/python","id":"sidebar-nav-item-44"},{"title":"Java","path":"api-reference/java","filePath":"../docs/cdktf/api-reference/java.mdx","fullPath":"/terraform/cdktf/api-reference/java","id":"sidebar-nav-item-45"},{"title":"C#","path":"api-reference/csharp","filePath":"../docs/cdktf/api-reference/csharp.mdx","fullPath":"/terraform/cdktf/api-reference/csharp","id":"sidebar-nav-item-46"},{"title":"Go","path":"api-reference/go","filePath":"../docs/cdktf/api-reference/go.mdx","fullPath":"/terraform/cdktf/api-reference/go","id":"sidebar-nav-item-47"},{"title":"Providers","path":"api-reference/provider","filePath":"../docs/cdktf/api-reference/provider.mdx","fullPath":"/terraform/cdktf/api-reference/provider","id":"sidebar-nav-item-48"}],"id":"sidebar-nav-item-41"},{"title":"Release","routes":[{"title":"Overview","path":"release","filePath":"../docs/cdktf/release/index.mdx","fullPath":"/terraform/cdktf/release","id":"sidebar-nav-item-50"},{"title":"Upgrading to Version 0.19","path":"release/upgrade-guide-v0-19","filePath":"../docs/cdktf/release/upgrade-guide-v0-19.mdx","fullPath":"/terraform/cdktf/release/upgrade-guide-v0-19","id":"sidebar-nav-item-51"},{"title":"Upgrading to Version 0.18","path":"release/upgrade-guide-v0-18","filePath":"../docs/cdktf/release/upgrade-guide-v0-18.mdx","fullPath":"/terraform/cdktf/release/upgrade-guide-v0-18","id":"sidebar-nav-item-52"},{"title":"Upgrading to Version 0.17","path":"release/upgrade-guide-v0-17","filePath":"../docs/cdktf/release/upgrade-guide-v0-17.mdx","fullPath":"/terraform/cdktf/release/upgrade-guide-v0-17","id":"sidebar-nav-item-53"},{"title":"Upgrading to Version 0.15","path":"release/upgrade-guide-v0-15","filePath":"../docs/cdktf/release/upgrade-guide-v0-15.mdx","fullPath":"/terraform/cdktf/release/upgrade-guide-v0-15","id":"sidebar-nav-item-54"},{"title":"Upgrading to Version 0.13","path":"release/upgrade-guide-v0-13","filePath":"../docs/cdktf/release/upgrade-guide-v0-13.mdx","fullPath":"/terraform/cdktf/release/upgrade-guide-v0-13","id":"sidebar-nav-item-55"},{"title":"Upgrading to Version 0.12","path":"release/upgrade-guide-v0-12","filePath":"../docs/cdktf/release/upgrade-guide-v0-12.mdx","fullPath":"/terraform/cdktf/release/upgrade-guide-v0-12","id":"sidebar-nav-item-56"},{"title":"Upgrading to Version 0.11","path":"release/upgrade-guide-v0-11","filePath":"../docs/cdktf/release/upgrade-guide-v0-11.mdx","fullPath":"/terraform/cdktf/release/upgrade-guide-v0-11","id":"sidebar-nav-item-57"},{"title":"Upgrading to Version 0.10","path":"release/upgrade-guide-v0-10","filePath":"../docs/cdktf/release/upgrade-guide-v0-10.mdx","fullPath":"/terraform/cdktf/release/upgrade-guide-v0-10","id":"sidebar-nav-item-58"},{"title":"Upgrading to Version 0.9","path":"release/upgrade-guide-v0-9","filePath":"../docs/cdktf/release/upgrade-guide-v0-9.mdx","fullPath":"/terraform/cdktf/release/upgrade-guide-v0-9","id":"sidebar-nav-item-59"},{"title":"Upgrading to Version 0.7","path":"release/upgrade-guide-v0-7","filePath":"../docs/cdktf/release/upgrade-guide-v0-7.mdx","fullPath":"/terraform/cdktf/release/upgrade-guide-v0-7","id":"sidebar-nav-item-60"},{"title":"Upgrading to Version 0.6","path":"release/upgrade-guide-v0-6","filePath":"../docs/cdktf/release/upgrade-guide-v0-6.mdx","fullPath":"/terraform/cdktf/release/upgrade-guide-v0-6","id":"sidebar-nav-item-61"}],"id":"sidebar-nav-item-49"},{"title":"Community","path":"community","filePath":"../docs/cdktf/community.mdx","fullPath":"/terraform/cdktf/community","id":"sidebar-nav-item-62"},{"title":"Telemetry","path":"telemetry","filePath":"../docs/cdktf/telemetry.mdx","fullPath":"/terraform/cdktf/telemetry","id":"sidebar-nav-item-63"}],"title":"CDK for Terraform","visuallyHideTitle":true}],"mainWidth":"narrow","githubFileUrl":"https://github.com/hashicorp/terraform-cdk/blob/main/website/../docs/cdktf/examples-and-guides/refactoring.mdx"},"metadata":{"title":"Refactoring - CDK for Terraform","description":"Refactor stacks as your CDKTF application grows in size and complexity.","layout":null},"outlineItems":[{"title":"Refactoring","url":"#refactoring","dataHeapTrack":"toc-list-item-index-0"},{"title":"Moving & Renaming Resources Within a Stack","url":"#moving-renaming-resources-within-a-stack","dataHeapTrack":"toc-list-item-index-1"},{"title":"Moving or renaming modules","url":"#moving-or-renaming-modules","dataHeapTrack":"toc-list-item-index-2"},{"title":"Moving Resources From One Stack To Another","url":"#moving-resources-from-one-stack-to-another","dataHeapTrack":"toc-list-item-index-3"}],"pageHeading":{"id":"refactoring","title":"Refactoring"},"mdxSource":{"compiledSource":"const layoutProps={};const MDXLayout=\"wrapper\";function MDXContent({components,...props}){return mdx(MDXLayout,{...layoutProps,...props,components:components,mdxType:\"MDXLayout\"},mdx(\"p\",null,`You may need to move resources between stacks as your CDK for Terraform (CDKTF) application grows in size and complexity. This guide demonstrates how to refactor your stacks. In general you can change the names of stacks freely without an effect on the synthesized code. If you change the name of a resource this might lead to a re-creation of the resource, especially if you move the resource from one stack to another.`),mdx(\"h2\",{\"id\":\"moving-renaming-resources-within-a-stack\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#moving-renaming-resources-within-a-stack\",\"aria-label\":\"moving renaming resources within a stack permalink\"},`\\xbb`),`Moving & Renaming Resources Within a Stack`),mdx(\"p\",null,`You may want to rename a deployed resource in a stack, like the `,mdx(\"inlineCode\",{parentName:\"p\"},`S3Bucket`),` in the following example.`),mdx(\"pre\",{\"className\":\"language-typescript\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-typescript\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`import`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token imports\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`Construct`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`from`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"constructs\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`import`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token imports\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`App`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`TerraformStack`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`from`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"cdktf\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`import`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token imports\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`AwsProvider`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`from`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"@cdktf/provider-aws/lib/provider\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`import`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token imports\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`S3Bucket`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`from`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"@cdktf/provider-aws/lib/s3-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`class`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`MyStack`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`extends`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`TerraformStack`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`constructor`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),`scope`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token maybe-class-name\"},`Construct`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` id`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token builtin\"},`string`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`super`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),`scope`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` id`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`AwsProvider`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"aws\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      region`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"us-east-1\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`// old S3Bucket definition`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`// new S3Bucket(this, \"my-bucket\", {`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`//   bucketprefix: \"my-bucket\",`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`// });`),`\n`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`// new S3Bucket definition`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`S3Bucket`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"new-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      bucketprefix`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"my-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`const`),` app `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`App`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`MyStack`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),`app`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"refactoring-example\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`app`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"code\",\"className\":\"token method function property-access\"},`synth`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`)),mdx(\"p\",null,`When you run a `,mdx(\"inlineCode\",{parentName:\"p\"},`cdktf plan`),`, the CLI may display the following output:`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token info punctuation\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token path\"},`refactoring-example    `)),mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`#`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`aws_s3_bucket.my-bucket will be destroyed`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token info punctuation\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token path\"},`                       `)),mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`#`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`(`),`because aws_s3_bucket.my-bucket is not `,mdx(\"span\",{parentName:\"span\",\"className\":\"token keyword\"},`in`),` configuration`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`)`))),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`                       - resource \"aws_s3_bucket\" \"my-bucket\" {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token info punctuation\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token path\"},`refactoring-example    `)),mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`#`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`aws_s3_bucket.new-bucket `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`(`),`new-bucket`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`)`),` will be created`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`                       + resource \"aws_s3_bucket\" \"new-bucket\" {`),`\n`)),mdx(\"p\",null,`Terraform plans to destroy the old bucket and create a new one to replace it. The replacement can be harmful if there is already state in the resource, such as files in the bucket or data in the database.`),mdx(\"p\",null,`To avoid this recreation behavior, use one of the move instance functions (`,mdx(\"inlineCode\",{parentName:\"p\"},`moveTo`),`, `,mdx(\"inlineCode\",{parentName:\"p\"},`moveToId`),`, `,mdx(\"inlineCode\",{parentName:\"p\"},`moveFromId`),`) available on the resource.`),mdx(\"pre\",{\"className\":\"language-typescript\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-typescript\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`import`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token imports\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`Construct`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`from`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"constructs\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`import`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token imports\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`App`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`TerraformStack`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`from`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"cdktf\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`import`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token imports\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`AwsProvider`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`from`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"@cdktf/provider-aws/lib/provider\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`import`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token imports\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`S3Bucket`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`from`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"@cdktf/provider-aws/lib/s3-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`class`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`MyStack`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`extends`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`TerraformStack`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`constructor`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),`scope`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token maybe-class-name\"},`Construct`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` id`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token builtin\"},`string`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`super`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),`scope`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` id`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`AwsProvider`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"aws\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      region`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"us-east-1\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`// old S3Bucket definition`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`S3Bucket`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"my-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      bucketprefix`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"my-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"code\",\"className\":\"token method function property-access\"},`moveTo`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"new-s3-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`// new S3Bucket definition`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`S3Bucket`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"new-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      bucketprefix`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"my-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"code\",\"className\":\"token method function property-access\"},`addMoveTarget`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"new-s3-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"h3\",{\"id\":\"performing-resource-moves\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#performing-resource-moves\",\"aria-label\":\"performing resource moves permalink\"},`\\xbb`),`Performing Resource Moves`),mdx(\"p\",null,`The `,mdx(\"inlineCode\",{parentName:\"p\"},`moveTo`),` function is available on all resources and is used for relocating a resource to the location specified by the string target `,mdx(\"inlineCode\",{parentName:\"p\"},`moveTarget`),`. To set a resource's `,mdx(\"inlineCode\",{parentName:\"p\"},`moveTarget`),`, use the `,mdx(\"inlineCode\",{parentName:\"p\"},`addMoveTarget`),` function that is present on the resource to move to. You can specify an arbitrary string for the `,mdx(\"inlineCode\",{parentName:\"p\"},`moveTarget`),`, but it must be unique within your stack.`),mdx(\"pre\",{\"className\":\"language-ts\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-ts\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`S3Bucket`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"test-bucket-move-to\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  bucket`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"move-bucket-name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"code\",\"className\":\"token method function property-access\"},`addMoveTarget`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"move-s3\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`S3Bucket`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"test-bucket-move-from\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  bucket`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"move-bucket-name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"code\",\"className\":\"token method function property-access\"},`moveTo`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"move-s3\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`)),mdx(\"p\",null,`After deployment, both the resource being moved and the move target on the destination resource can be removed.`),mdx(\"h4\",{\"id\":\"move-targets\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#move-targets\",\"aria-label\":\"move targets permalink\"},`\\xbb`),`Move Targets`),mdx(\"p\",null,`A `,mdx(\"inlineCode\",{parentName:\"p\"},`moveTarget`),` is accessible anywhere within the context of the stack where it is created, including the root of the stack and within a nested construct. This workflow does not support moving resources to a different stack.`),mdx(\"pre\",{\"className\":\"language-ts\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-ts\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`S3Bucket`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"test-bucket-1\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  bucket`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"test-move-bucket-name-1\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"code\",\"className\":\"token method function property-access\"},`moveTo`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"move\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`// Contains resource with moveTarget \"move\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`NestedConstructToMoveTo`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"construct-to-move-to\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`)),mdx(\"h3\",{\"id\":\"enabling-foreach-on-a-resource\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#enabling-foreach-on-a-resource\",\"aria-label\":\"enabling foreach on a resource permalink\"},`\\xbb`),`Enabling `,mdx(\"inlineCode\",{parentName:\"h3\"},`foreach`),` on a Resource`),mdx(\"p\",null,`To incorporate a deployed resource into a `,mdx(\"inlineCode\",{parentName:\"p\"},`foreach`),` composition without destroying the resource, specify an index as a second argument in the `,mdx(\"inlineCode\",{parentName:\"p\"},`moveTo`),` function. The index should correspond to the key in the `,mdx(\"inlineCode\",{parentName:\"p\"},`TerraformIterator`),` named `,mdx(\"inlineCode\",{parentName:\"p\"},`iterator`),`.`),mdx(\"pre\",{\"className\":\"language-ts\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-ts\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`const`),` iterator `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token maybe-class-name\"},`TerraformIterator`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"code\",\"className\":\"token method function property-access\"},`fromMap`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"website-static-files\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    name`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"website-static-files\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    tags`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),` app`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"website\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  images`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),` name`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"images\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` tags`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),` app`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"image-converter\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`S3Bucket`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"iterator-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  forEach`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` iterator`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  bucket`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` iterator`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"code\",\"className\":\"token method function property-access\"},`getString`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  tags`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` iterator`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"code\",\"className\":\"token method function property-access\"},`getStringMap`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"tags\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"code\",\"className\":\"token method function property-access\"},`addMoveTarget`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"resourceWithIterator\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`S3Bucket`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"moved-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  bucket`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"website-static-files\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  tags`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),` app`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"website\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"code\",\"className\":\"token method function property-access\"},`moveTo`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"resourceWithIterator\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"website-static-files\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`)),mdx(\"p\",null,`This allows you to efficiently integrate existing resources into a `,mdx(\"inlineCode\",{parentName:\"p\"},`foreach`),` composition without destroying the existing deployed resource.`),mdx(\"h3\",{\"id\":\"move-by-resource-address\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#move-by-resource-address\",\"aria-label\":\"move by resource address permalink\"},`\\xbb`),`Move By Resource Address`),mdx(\"p\",null,`In instances where the move target workflow does not easily fit your use case, resource moves can be performed by directly specifying the full resource address to be moved to/from.`),mdx(\"h4\",{\"id\":\"move-to\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#move-to\",\"aria-label\":\"move to permalink\"},`\\xbb`),`Move To`),mdx(\"pre\",{\"className\":\"language-typescript\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-typescript\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`S3Bucket`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"bucket-moved\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  bucket`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"move-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"code\",\"className\":\"token method function property-access\"},`moveToId`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"aws_s3_bucket.bucket-new\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`S3Bucket`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"bucket-new\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  bucket`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"move-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`)),mdx(\"h4\",{\"id\":\"move-from\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#move-from\",\"aria-label\":\"move from permalink\"},`\\xbb`),`Move From`),mdx(\"pre\",{\"className\":\"language-typescript\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-typescript\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`// Old resource`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`// new S3Bucket(this, \"bucket-moved\", {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`//   bucket: \"move-bucket\",`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`// });`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`S3Bucket`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"bucket-new\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  bucket`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"move-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"code\",\"className\":\"token method function property-access\"},`moveFromId`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"aws_s3_bucket.bucket-moved\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`)),mdx(\"p\",null,`Note that in moving from a specified resource address, the original resource being moved from must be removed.`),mdx(\"h4\",{\"id\":\"nested-constructs\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#nested-constructs\",\"aria-label\":\"nested constructs permalink\"},`\\xbb`),`Nested Constructs`),mdx(\"p\",null,`Resource addresses in the context of nested constructs will not simply be the specified id given to the resource. When dealing with moving resources by their address to/from nested constructs, run `,mdx(\"inlineCode\",{parentName:\"p\"},`cdktf synth`),` and refer to `,mdx(\"inlineCode\",{parentName:\"p\"},`cdktf.out/stacks/'your stack name'`),` to find the exact address to move to/from.`),mdx(\"pre\",{\"className\":\"language-typescript\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-typescript\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`S3Bucket`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"bucket-moved\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  bucket`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"bucket-moved\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"code\",\"className\":\"token method function property-access\"},`moveToId`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"aws_s3_bucket.nested-construct_bucket-new_5A0C9225\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`// moving to S3Bucket \"bucket-new\" in NestedConstruct \"nested-construct\"`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`NestedConstruct`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"nested-construct\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`)),mdx(\"h2\",{\"id\":\"moving-or-renaming-modules\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#moving-or-renaming-modules\",\"aria-label\":\"moving or renaming modules permalink\"},`\\xbb`),`Moving or renaming modules`),mdx(\"p\",null,`To change the id of a module without losing its state use the `,mdx(\"inlineCode\",{parentName:\"p\"},`terraform state mv`),` command. This command needs to be run in the output directory of the stack that contains the module. Commonly this is `,mdx(\"inlineCode\",{parentName:\"p\"},`cdktf.out/stacks/<stack-name>`),`. The command takes two arguments, the first is the current id of the module, the second is the new id of the module.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token builtin class-name\"},`cd`),` cdktf.out/stacks/refactoring-example`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`terraform state `,mdx(\"span\",{parentName:\"span\",\"className\":\"token function\"},`mv`),` module.my-module module.my-new-module`)),`\n`)),mdx(\"p\",null,`For further details on the `,mdx(\"inlineCode\",{parentName:\"p\"},`terraform state mv`),` command refer to the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/cli/commands/state/mv\"},`Terraform documentation`),`.`),mdx(\"h2\",{\"id\":\"moving-resources-from-one-stack-to-another\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#moving-resources-from-one-stack-to-another\",\"aria-label\":\"moving resources from one stack to another permalink\"},`\\xbb`),`Moving Resources From One Stack To Another`),mdx(\"p\",null,`You may want to move a resource from one stack to another, like the following example aws `,mdx(\"inlineCode\",{parentName:\"p\"},`S3Bucket`),` resource.`),mdx(\"pre\",{\"className\":\"language-typescript\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-typescript\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`import`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token imports\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`Construct`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`from`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"constructs\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`import`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token imports\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`App`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`TerraformStack`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`from`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"cdktf\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`import`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token imports\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`AwsProvider`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`from`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"@cdktf/provider-aws/lib/provider\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`import`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token imports\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`S3Bucket`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword module\"},`from`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"@cdktf/provider-aws/lib/s3-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`class`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`MyFirstStack`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`extends`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`TerraformStack`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`constructor`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),`scope`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token maybe-class-name\"},`Construct`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` id`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token builtin\"},`string`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`super`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),`scope`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` id`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`AwsProvider`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"aws\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      region`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"us-east-1\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`// Old Definition`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`// new S3Bucket(this, \"my-bucket\", {`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`//   bucketPrefix: \"my-bucket\",`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`// });`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`class`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`MySecondStack`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`extends`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`TerraformStack`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`constructor`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),`scope`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token maybe-class-name\"},`Construct`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` id`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token builtin\"},`string`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`super`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),`scope`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` id`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`AwsProvider`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"aws\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      region`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"us-east-1\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`// New Definition`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`S3Bucket`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`this`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"my-other-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      bucketPrefix`,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"my-bucket\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`const`),` app `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`App`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`MyFirstStack`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),`app`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"refactoring-example-stack-move-1\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`new`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token class-name\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token maybe-class-name\"},`MySecondStack`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),`app`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"refactoring-example-stack-move-2\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`,`app`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"code\",\"className\":\"token method function property-access\"},`synth`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`(`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`)`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`;`),`\n`)),mdx(\"p\",null,`When you run a `,mdx(\"inlineCode\",{parentName:\"p\"},`cdktf deploy '*'`),`, the CLI displays the following output.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token info punctuation\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token path\"},`refactoring-example-stack-move-1    `)),mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`#`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`aws_s3_bucket.my-bucket will be destroyed`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token info punctuation\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token path\"},`                                    `)),mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`#`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`(`),`because aws_s3_bucket.my-bucket is not `,mdx(\"span\",{parentName:\"span\",\"className\":\"token keyword\"},`in`),` configuration`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`)`))),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`                                    - resource \"aws_s3_bucket\" \"my-bucket\" {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token info punctuation\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token path\"},`refactoring-example-stack-move-2    `)),mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`#`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`aws_s3_bucket.my-other-bucket `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`(`),`my-other-bucket`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`)`),` will be created`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`...`),`\n`)),mdx(\"p\",null,`To preserve the state of the resource, you must move it from one stack to another. You can use `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/cli/commands/import\"},mdx(\"inlineCode\",{parentName:\"a\"},`terraform import`)),` and `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/cli/commands/state/rm\"},mdx(\"inlineCode\",{parentName:\"a\"},`terraform state rm`)),` to move the resource's state. First we need to find the Terraform name of the Resource in the old stack.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token function\"},`cat`),` cdktf.out/stacks/refactoring-example-stack-move-1/cdk.tf.json `,mdx(\"span\",{parentName:\"span\",\"className\":\"token operator\"},`|`),` jq `,mdx(\"span\",{parentName:\"span\",\"className\":\"token string\"},`'.resource.aws_s3_bucket'`))),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`{`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  \"my-bucket\": {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    \"//\": {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`      \"metadata\": {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`        \"path\": \"refactoring-example-stack-move-1/my-bucket\",`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`        \"uniqueId\": \"my-bucket\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`      }`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    },`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    \"bucket_prefix\": \"my-bucket\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  }`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`}`),`\n`)),mdx(\"p\",null,`Now we need to find the name of the resource in the new stack to understand where to move the resource to.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`cdktf synth `,mdx(\"span\",{parentName:\"span\",\"className\":\"token comment\"},`# To ensure our synthesized stack is up to date`))),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token function\"},`cat`),` cdktf.out/stacks/refactoring-example-stack-move-2/cdk.tf.json `,mdx(\"span\",{parentName:\"span\",\"className\":\"token operator\"},`|`),` jq `,mdx(\"span\",{parentName:\"span\",\"className\":\"token string\"},`'.resource.aws_s3_bucket'`))),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`{`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  \"my-other-bucket\": {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    \"//\": {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`      \"metadata\": {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`        \"path\": \"refactoring-example-stack-move-2/my-other-bucket\",`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`        \"uniqueId\": \"my-other-bucket\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`      }`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    },`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    \"bucket_prefix\": \"my-other-bucket\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  }`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`}`),`\n`)),mdx(\"p\",null,`We need to find the id of the resource, we can use the `,mdx(\"inlineCode\",{parentName:\"p\"},`terraform state show`),` command to find it. The id is depenendent on the resource being imported, see `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/cli/commands/import#usage\"},`the import docs`),` for more details. We need to run these commands in the directory of the stack we are importing the resource from.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token builtin class-name\"},`cd`),` cdktf.out/stacks/refactoring-example-stack-move-1/`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`terraform init`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`terraform state show aws_s3_bucket.my-bucket`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`#`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`aws_s3_bucket.my-bucket:`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`resource \"aws_s3_bucket\" \"my-bucket\" {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    arn                         = \"arn:aws:s3:::my-bucket20221208141249058600000001\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    bucket                      = \"my-bucket20221208141249058600000001\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    bucket_domain_name          = \"my-bucket20221208141249058600000001.s3.amazonaws.com\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    bucket_prefix               = \"my-bucket\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    bucket_regional_domain_name = \"my-bucket20221208141249058600000001.s3.amazonaws.com\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    force_destroy               = false`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    hosted_zone_id              = \"Z3AQBSTGFYJSTF\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    id                          = \"my-bucket20221208141249058600000001\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    object_lock_enabled         = false`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    region                      = \"us-east-1\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    request_payer               = \"BucketOwner\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    tags_all                    = {}`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    grant {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`        id          = \"554912fda2704333d162d216be50aefb05562e0bf1709997f1d9417cf46087d5\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`        permissions = [`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`            \"FULL_CONTROL\",`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`        ]`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`        type        = \"CanonicalUser\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    }`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    versioning {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`        enabled    = false`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`        mfa_delete = false`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`    }`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`}`),`\n`)),mdx(\"p\",null,`Now that we have the id (`,mdx(\"inlineCode\",{parentName:\"p\"},`\"my-bucket20221208141249058600000001\"`),`) we can import it. This command needs to be run in the directory of the stack we are importing the resource to.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token builtin class-name\"},`cd`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`..`),`/refactoring-example-stack-move-2`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`terraform `,mdx(\"span\",{parentName:\"span\",\"className\":\"token function\"},`import`),` aws_s3_bucket.my-other-bucket my-bucket20221208141249058600000001`)),`\n`)),mdx(\"p\",null,`We have imported the resource in the new stack, but we still need to remove it from the old stack. This command needs to be run in the directory of the stack we are removing the resource from.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token builtin class-name\"},`cd`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`..`),`/refactoring-example-stack-move-1`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`terraform state `,mdx(\"span\",{parentName:\"span\",\"className\":\"token function\"},`rm`),` aws_s3_bucket.my-bucket`)),`\n`)),mdx(\"p\",null,`We can verify everything worked as expected by running a `,mdx(\"inlineCode\",{parentName:\"p\"},`cdktf deploy '*'`),` again. We should now see no changes.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token builtin class-name\"},`cd`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`..`),`/`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`..`),`/`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`..`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token comment\"},`# Back to the root of the project`))),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`#`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`The next deploy should show no changes`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`cdktf deploy `,mdx(\"span\",{parentName:\"span\",\"className\":\"token string\"},`'*'`))),`\n`)),mdx(\"h3\",{\"id\":\"why-do-i-need-to-find-the-terraform-name-of-the-resource\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#why-do-i-need-to-find-the-terraform-name-of-the-resource\",\"aria-label\":\"why do i need to find the terraform name of the resource permalink\"},`\\xbb`),`Why Do I Need To Find The Terraform Name Of The Resource?`),mdx(\"p\",null,`If you use Constructs to organize your code, you might have a level between the generated provider constructs and the `,mdx(\"inlineCode\",{parentName:\"p\"},`TerraformStack`),` construct to organize your code.`),mdx(\"p\",null,`This extra level adds a prefix to the name of the resource to ensure uniqueness. Refer to `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/cdktf/concepts/constructs#scope\"},`Constructs`),` for more details.`))};MDXContent.isMDXComponent=true;","scope":{"version":"latest"}},"product":{"slug":"terraform","name":"Terraform","algoliaConfig":{"indexName":"product_TERRAFORM"},"alertBannerActive":true,"alertBanner":{"tag":"New","url":"https://www.hashicorp.com/blog/introducing-the-infrastructure-cloud","text":"Terraform Cloud is now HCP Terraform","linkText":"Read more →","expirationDate":"2024-04-29T00:00:00-08:00"},"basePaths":["cdktf","cli","cloud-docs","cloud-docs/agents","docs","enterprise","internals","intro","language","plugin","plugin/framework","plugin/log","plugin/mux","plugin/sdkv2","plugin/testing","registry","downloads"],"docsNavItems":["docs","language","cli","cloud-docs","enterprise","cdktf",{"icon":"provider","label":"Provider Use","fullPath":"/terraform/language/providers"},"plugin","registry",{"icon":"handshake","label":"Integration Program","fullPath":"/terraform/docs/partnerships"}],"rootDocsPaths":[{"iconName":"code","name":"CDK for Terraform","path":"cdktf","productSlugForLoader":"terraform-cdk"},{"iconName":"terminal-screen","name":"Terraform CLI","path":"cli"},{"iconName":"cloud","name":"HCP Terraform","path":"cloud-docs","productSlugForLoader":"terraform-docs-common"},{"iconName":"cloud","name":"Cloud Docs Agents","navDataPrefix":"cloud-docs-agents","path":"cloud-docs/agents","productSlugForLoader":"terraform-docs-agents"},{"iconName":"docs","name":"About the Docs","path":"docs","productSlugForLoader":"terraform-docs-common"},{"iconName":"org","name":"Terraform Enterprise","path":"enterprise","productSlugForLoader":"ptfe-releases"},{"iconName":"docs","name":"Internals","path":"internals"},{"iconName":"docs","name":"Intro","path":"intro"},{"iconName":"file-source","name":"Configuration Language","path":"language"},{"iconName":"wrench","name":"Plugin Development","path":"plugin","productSlugForLoader":"terraform-docs-common"},{"iconName":"plug","name":"Framework","navDataPrefix":"plugin-framework","path":"plugin/framework","productSlugForLoader":"terraform-plugin-framework"},{"iconName":"plug","name":"Logging","navDataPrefix":"plugin-log","path":"plugin/log","productSlugForLoader":"terraform-plugin-log"},{"iconName":"plug","name":"Combining and Translating","navDataPrefix":"plugin-mux","path":"plugin/mux","productSlugForLoader":"terraform-plugin-mux"},{"iconName":"plug","name":"SDKv2","path":"plugin/sdkv2","productSlugForLoader":"terraform-plugin-sdk","navDataPrefix":"plugin-sdkv2"},{"iconName":"plug","name":"Testing","path":"plugin/testing","productSlugForLoader":"terraform-plugin-testing","navDataPrefix":"plugin-testing"},{"iconName":"plus-circle","name":"Registry Publishing","path":"registry","productSlugForLoader":"terraform-docs-common"}],"currentRootDocsPath":{"iconName":"code","name":"CDK for Terraform","path":"cdktf","productSlugForLoader":"terraform-cdk"}},"projectName":"CDK For Terraform","versions":null},"__N_SSG":true}