{"pageProps":{"metadata":{"title":"Kubernetes Apply Platform | Integrations"},"product":{"name":"Waypoint","slug":"waypoint","algoliaConfig":{"indexName":"product_WAYPOINT","searchOnlyApiKey":"5e4adfd8094367056501547d6fedb6c5"},"analyticsConfig":{"includedDomains":"waypointproject.io www.waypointproject.io","segmentWriteKey":"9mlIVayJbNtJW2EOdAFKHNKcdLAgEDlV"},"metadata":{"title":"Waypoint by HashiCorp","description":"Waypoint provides a modern workflow for build, deploy, and release across platforms.","image":"https://www.waypointproject.io/waypoint-public/img/og-image.png","icon":[{"href":"/waypoint-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiConf","url":"https://hashiconf.com/2023?utm_source=direct&utm_medium=banner&utm_campaign=23Q3_HASHICONFGLOBAL_EVENT&utm_content=&utm_offer=event","text":"Our community conference is taking place in San Francisco and online October 10-12.","linkText":"Register now","expirationDate":""},"subnavItems":[{"text":"Overview","url":"/","type":"inbound"},{"text":"Tutorials","url":"https://developer.hashicorp.com/waypoint/tutorials","type":"inbound"},{"text":"Docs","url":"https://developer.hashicorp.com/waypoint/docs","type":"inbound"},{"text":"CLI","url":"https://developer.hashicorp.com/waypoint/commands","type":"inbound"},{"text":"Integrations","url":"https://developer.hashicorp.com/waypoint/integrations","type":"inbound"},{"text":"Community","url":"/community","type":"inbound"}],"basePaths":["commands","docs","plugins","tutorials","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs","includeMDXSource":true},{"iconName":"api","name":"API","path":"api-docs"},{"iconName":"terminal-screen","name":"CLI","path":"commands"}],"integrationsConfig":{"description":"A curated collection of official, partner, and community Waypoint Integrations."}},"integration":{"id":"c6fee453-b901-4ff3-8988-54aa0463ca1b","slug":"kubernetes-apply","name":"Kubernetes Apply","description":"The Kubernetes Apply plugin deploys Kubernetes resources directly from a single file or a directory of YAML or JSON files.","license_type":"MPL-2.0","license_url":"https://github.com/hashicorp/waypoint/blob/main/LICENSE","external_only":false,"external_url":null,"tier":"official","repo_url":"https://github.com/hashicorp/waypoint","subdirectory":"/builtin/k8s/apply","created_at":"2023-02-03T18:33:58.527Z","updated_at":"2023-02-03T18:42:46.050Z","hide_versions":false,"organization":{"id":"a4a0551a-1451-4d89-9f56-8031c8350c77","slug":"hashicorp","created_at":"2022-11-09T22:56:32.391Z","updated_at":"2022-11-09T22:56:32.391Z"},"product":{"id":"68c85272-e2bf-4330-aa43-4ce4e6d899ee","slug":"waypoint","name":"Waypoint","created_at":"2022-11-09T22:56:30.388Z","updated_at":"2022-11-09T22:56:30.388Z"},"versions":["0.11.0"],"components":[{"id":"eaf5a966-8a56-4b75-a76f-f40c874037de","slug":"platform","name":"Platform","plural_name":"Platforms"}],"flags":[{"id":"d2a85dd2-1cca-4ce9-8f88-fef3c8dd0510","slug":"builtin","name":"Built-in","description":"This integration is shipped in the core product and does not need to be installed.","created_at":"2022-11-09T22:56:30.770Z","updated_at":"2023-01-27T18:33:54.665Z"}],"integration_type":null},"activeRelease":{"id":"46e44e33-e369-4fc4-ba98-b9e02e5116e7","integration_id":"c6fee453-b901-4ff3-8988-54aa0463ca1b","version":"0.11.0","readme":"The Kubernetes Apply plugin deploys Kubernetes resources directly from a single\nfile or a directory of YAML or JSON files.\n\n### Components\n\n1. [Platform](/waypoint/integrations/hashicorp/kubernetes-apply/latest/components/platform/kubernetes-apply-platform)\n\n### Related Plugins\n\n1. [Docker](/waypoint/integrations/hashicorp/docker)\n","created_at":"2023-02-13T19:44:40.352Z","updated_at":"2023-04-04T18:44:49.700Z","components":[{"id":"d9b625c1-f597-4a2d-92f5-f82c0033aa93","integration_release_id":"46e44e33-e369-4fc4-ba98-b9e02e5116e7","component_id":"eaf5a966-8a56-4b75-a76f-f40c874037de","readme":"<!-- This file was generated via `make gen/integrations-hcl` -->\nDeploy Kubernetes resources directly from a single file or a directory of YAML\nor JSON files.\n\nThis plugin lets you use any pre-existing set of Kubernetes resource files\nto deploy to Kubernetes. This plugin supports all the features of Waypoint.\nYou may use Waypoint's [templating features](/waypoint/docs/waypoint-hcl/functions/template)\nto template the resources with information such as the artifact from\na previous build step, entrypoint environment variables, etc.\n\n### Requirements\n\nThis plugin requires \"kubectl\" to be installed since this plugin works by\nsubprocessing to \"kubectl apply\". Other Waypoint Kubernetes plugins sometimes\nuse the API directly but this plugin requires \"kubectl\".\n\n\"kubectl\" must also be configured to access your Kubernetes cluster. You\nmay specify an alternate kubeconfig file using the \"kubeconfig\" configuration\nparameter. If this isn't specified, the default kubectl lookup paths will be\nused.\n\n### Artifact Access\n\nYou may use Waypoint's [templating features](/waypoint/docs/waypoint-hcl/functions/template)\nto access information such as the artifact from the build or push stages.\nAn example below shows this by using `templatedir` mixed with\nvariables such as `artifact.image` to dynamically configure the\nDocker image within a Kubernetes Deployment.\n\n### Entrypoint Functionality\n\nWaypoint [entrypoint functionality](/waypoint/docs/entrypoint#functionality) such\nas logs, exec, app configuration, and more require two properties to be true:\n\n1. The running image must already have the Waypoint entrypoint installed\n  and configured as the entrypoint. This should happen in the build stage.\n\n2. Proper environment variables must be set so the entrypoint knows how\n  to communicate to the Waypoint server. **This step happens in this\n  deployment stage.**\n\n**Step 2 does not happen automatically.** You must manually set the entrypoint\nenvironment variables using the [templating feature](/waypoint/docs/waypoint-hcl/functions/template).\nOne of the examples below shows the entrypoint environment variables being\ninjected.\n\n### URL Service\n\nIf you want your workload to be accessible by the\n[Waypoint URL service](/waypoint/docs/url), you must set the PORT environment variable\nwithin the pod with your web service and also be using the Waypoint\nentrypoint (documented in the previous section).\n\nThe PORT environment variable should be the port that your web service\nis listening on that the URL service will connect to. See one of the examples\nbelow for more details.\n\n### Interface\n\n- Input: **None**\n- Output: **k8sapply.Deployment**\n\n### Examples\n\n```hcl\n// The waypoint.hcl file\ndeploy {\n  use \"kubernetes-apply\" {\n    // Templated to perhaps bring in the artifact from a previous\n    // build/registry, entrypoint env vars, etc.\n    path        = templatedir(\"${path.app}/k8s\")\n    prune_label = \"app=myapp\"\n\tprune_allowlist = [\n\t\t\"apps/v1/Deployment\",\n\t\t\"apps/v1/ReplicaSet\"\n  \t]\n  }\n}\n\n// ./k8s/deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-deployment\n  labels:\n    app: myapp\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: myapp\n  template:\n    metadata:\n      labels:\n        app: myapp\n    spec:\n      containers:\n      - name: myapp\n        image: ${artifact.image}:${artifact.tag}\n        env:\n          %{ for k,v in entrypoint.env ~}\n          - name: ${k}\n            value: \"${v}\"\n          %{ endfor ~}\n\n          # Ensure we set PORT for the URL service. This is only necessary\n          # if we want the URL service to function.\n          - name: PORT\n            value: \"3000\"\n```\n\n","created_at":"2023-03-14T21:14:17.831Z","updated_at":"2023-03-14T21:14:17.831Z","name":"Kubernetes Apply Platform","slug":"kubernetes-apply-platform","component":{"id":"eaf5a966-8a56-4b75-a76f-f40c874037de","slug":"platform","name":"Platform","plural_name":"Platforms","product_id":"68c85272-e2bf-4330-aa43-4ce4e6d899ee","created_at":"2022-11-09T22:56:31.464Z","updated_at":"2022-11-09T22:56:31.464Z"},"variable_groups":[{"id":"db7a1b4e-30fd-47d7-a9e1-7176e12f03db","created_at":"2023-03-14T21:14:18.498Z","updated_at":"2023-03-14T21:14:18.498Z","integration_release_component_id":"d9b625c1-f597-4a2d-92f5-f82c0033aa93","variable_group_config":{"id":"263c5c35-8751-466c-aa7a-7f1a76973bd6","product_id":"68c85272-e2bf-4330-aa43-4ce4e6d899ee","name":"Parameters","filename":"parameters.hcl","stanza":"parameter","display_order":1,"created_at":"2022-12-06T21:05:38.246Z","updated_at":"2022-12-06T21:05:38.246Z"},"variables":[{"id":"6af12189-6434-44d3-89f1-32da28849efd","variable_group_id":"db7a1b4e-30fd-47d7-a9e1-7176e12f03db","key":"context","description":"The kubectl context to use, as defined in the kubeconfig file.","type":"string","required":false,"default_value":null,"created_at":"2023-03-14T21:14:18.842Z","updated_at":"2023-03-14T21:14:18.842Z"},{"id":"ae052dfc-466d-4b99-be96-f6c90b12907b","variable_group_id":"db7a1b4e-30fd-47d7-a9e1-7176e12f03db","key":"kubeconfig","description":"Path to the kubeconfig file to use.\nIf this isn't set, the default lookup used by `kubectl` will be used.","type":"string","required":false,"default_value":null,"created_at":"2023-03-14T21:14:19.197Z","updated_at":"2023-03-14T21:14:19.197Z"},{"id":"1d62bda1-348f-49e5-bacd-e29aa1fe132b","variable_group_id":"db7a1b4e-30fd-47d7-a9e1-7176e12f03db","key":"path","description":"Path to a file or directory of YAML or  JSON files.\nThis will be used for `kubectl apply` to create a set of Kubernetes resources. Pair this with `templatefile` or `templatedir` [templating functions](/waypoint/docs/waypoint-hcl/functions/template) to inject dynamic elements into your Kubernetes resources. Subdirectories are included recursively.","type":"string","required":true,"default_value":null,"created_at":"2023-03-14T21:14:19.542Z","updated_at":"2023-03-14T21:14:19.542Z"},{"id":"1eb5702f-3010-4972-b11c-ef13dabe7c9c","variable_group_id":"db7a1b4e-30fd-47d7-a9e1-7176e12f03db","key":"prune_allowlist","description":null,"type":"list of string","required":false,"default_value":null,"created_at":"2023-03-14T21:14:19.988Z","updated_at":"2023-03-14T21:14:19.988Z"},{"id":"92743c6a-99b2-4e9c-849b-9643f3ffe8d3","variable_group_id":"db7a1b4e-30fd-47d7-a9e1-7176e12f03db","key":"prune_label","description":"Label selector to prune resources that aren't present in the `path`.\nThis is a label selector that is used to search for any resources that are NOT present in the configured `path` and delete them.","type":"string","required":true,"default_value":null,"created_at":"2023-03-14T21:14:20.314Z","updated_at":"2023-03-14T21:14:20.314Z"}]},{"id":"bb7d38d7-e5d0-41ab-94e9-fc5c79474037","created_at":"2023-03-14T21:14:20.638Z","updated_at":"2023-03-14T21:14:20.638Z","integration_release_component_id":"d9b625c1-f597-4a2d-92f5-f82c0033aa93","variable_group_config":{"id":"917f7cae-7d3e-426c-97e0-cbbda32a6d5a","product_id":"68c85272-e2bf-4330-aa43-4ce4e6d899ee","name":"Outputs","filename":"outputs.hcl","stanza":"output","display_order":2,"created_at":"2022-12-06T21:05:38.392Z","updated_at":"2022-12-06T21:05:38.392Z"},"variables":[{"id":"20e522c2-fcbb-407d-8452-7b787de49c2a","variable_group_id":"bb7d38d7-e5d0-41ab-94e9-fc5c79474037","key":"prune_allowlist","description":null,"type":"list of string","required":null,"default_value":null,"created_at":"2023-03-14T21:14:21.001Z","updated_at":"2023-03-14T21:14:21.001Z"},{"id":"c6bb3021-d775-4912-87da-7f11faa59632","variable_group_id":"bb7d38d7-e5d0-41ab-94e9-fc5c79474037","key":"prune_label","description":null,"type":"string","required":null,"default_value":null,"created_at":"2023-03-14T21:14:21.376Z","updated_at":"2023-03-14T21:14:21.376Z"}]}]}]},"component":{"id":"d9b625c1-f597-4a2d-92f5-f82c0033aa93","integration_release_id":"46e44e33-e369-4fc4-ba98-b9e02e5116e7","component_id":"eaf5a966-8a56-4b75-a76f-f40c874037de","readme":"<!-- This file was generated via `make gen/integrations-hcl` -->\nDeploy Kubernetes resources directly from a single file or a directory of YAML\nor JSON files.\n\nThis plugin lets you use any pre-existing set of Kubernetes resource files\nto deploy to Kubernetes. This plugin supports all the features of Waypoint.\nYou may use Waypoint's [templating features](/waypoint/docs/waypoint-hcl/functions/template)\nto template the resources with information such as the artifact from\na previous build step, entrypoint environment variables, etc.\n\n### Requirements\n\nThis plugin requires \"kubectl\" to be installed since this plugin works by\nsubprocessing to \"kubectl apply\". Other Waypoint Kubernetes plugins sometimes\nuse the API directly but this plugin requires \"kubectl\".\n\n\"kubectl\" must also be configured to access your Kubernetes cluster. You\nmay specify an alternate kubeconfig file using the \"kubeconfig\" configuration\nparameter. If this isn't specified, the default kubectl lookup paths will be\nused.\n\n### Artifact Access\n\nYou may use Waypoint's [templating features](/waypoint/docs/waypoint-hcl/functions/template)\nto access information such as the artifact from the build or push stages.\nAn example below shows this by using `templatedir` mixed with\nvariables such as `artifact.image` to dynamically configure the\nDocker image within a Kubernetes Deployment.\n\n### Entrypoint Functionality\n\nWaypoint [entrypoint functionality](/waypoint/docs/entrypoint#functionality) such\nas logs, exec, app configuration, and more require two properties to be true:\n\n1. The running image must already have the Waypoint entrypoint installed\n  and configured as the entrypoint. This should happen in the build stage.\n\n2. Proper environment variables must be set so the entrypoint knows how\n  to communicate to the Waypoint server. **This step happens in this\n  deployment stage.**\n\n**Step 2 does not happen automatically.** You must manually set the entrypoint\nenvironment variables using the [templating feature](/waypoint/docs/waypoint-hcl/functions/template).\nOne of the examples below shows the entrypoint environment variables being\ninjected.\n\n### URL Service\n\nIf you want your workload to be accessible by the\n[Waypoint URL service](/waypoint/docs/url), you must set the PORT environment variable\nwithin the pod with your web service and also be using the Waypoint\nentrypoint (documented in the previous section).\n\nThe PORT environment variable should be the port that your web service\nis listening on that the URL service will connect to. See one of the examples\nbelow for more details.\n\n### Interface\n\n- Input: **None**\n- Output: **k8sapply.Deployment**\n\n### Examples\n\n```hcl\n// The waypoint.hcl file\ndeploy {\n  use \"kubernetes-apply\" {\n    // Templated to perhaps bring in the artifact from a previous\n    // build/registry, entrypoint env vars, etc.\n    path        = templatedir(\"${path.app}/k8s\")\n    prune_label = \"app=myapp\"\n\tprune_allowlist = [\n\t\t\"apps/v1/Deployment\",\n\t\t\"apps/v1/ReplicaSet\"\n  \t]\n  }\n}\n\n// ./k8s/deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-deployment\n  labels:\n    app: myapp\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: myapp\n  template:\n    metadata:\n      labels:\n        app: myapp\n    spec:\n      containers:\n      - name: myapp\n        image: ${artifact.image}:${artifact.tag}\n        env:\n          %{ for k,v in entrypoint.env ~}\n          - name: ${k}\n            value: \"${v}\"\n          %{ endfor ~}\n\n          # Ensure we set PORT for the URL service. This is only necessary\n          # if we want the URL service to function.\n          - name: PORT\n            value: \"3000\"\n```\n\n","created_at":"2023-03-14T21:14:17.831Z","updated_at":"2023-03-14T21:14:17.831Z","name":"Kubernetes Apply Platform","slug":"kubernetes-apply-platform","component":{"id":"eaf5a966-8a56-4b75-a76f-f40c874037de","slug":"platform","name":"Platform","plural_name":"Platforms","product_id":"68c85272-e2bf-4330-aa43-4ce4e6d899ee","created_at":"2022-11-09T22:56:31.464Z","updated_at":"2022-11-09T22:56:31.464Z"},"variable_groups":[{"id":"db7a1b4e-30fd-47d7-a9e1-7176e12f03db","created_at":"2023-03-14T21:14:18.498Z","updated_at":"2023-03-14T21:14:18.498Z","integration_release_component_id":"d9b625c1-f597-4a2d-92f5-f82c0033aa93","variable_group_config":{"id":"263c5c35-8751-466c-aa7a-7f1a76973bd6","product_id":"68c85272-e2bf-4330-aa43-4ce4e6d899ee","name":"Parameters","filename":"parameters.hcl","stanza":"parameter","display_order":1,"created_at":"2022-12-06T21:05:38.246Z","updated_at":"2022-12-06T21:05:38.246Z"},"variables":[{"id":"6af12189-6434-44d3-89f1-32da28849efd","variable_group_id":"db7a1b4e-30fd-47d7-a9e1-7176e12f03db","key":"context","description":"The kubectl context to use, as defined in the kubeconfig file.","type":"string","required":false,"default_value":null,"created_at":"2023-03-14T21:14:18.842Z","updated_at":"2023-03-14T21:14:18.842Z"},{"id":"ae052dfc-466d-4b99-be96-f6c90b12907b","variable_group_id":"db7a1b4e-30fd-47d7-a9e1-7176e12f03db","key":"kubeconfig","description":"Path to the kubeconfig file to use.\nIf this isn't set, the default lookup used by `kubectl` will be used.","type":"string","required":false,"default_value":null,"created_at":"2023-03-14T21:14:19.197Z","updated_at":"2023-03-14T21:14:19.197Z"},{"id":"1d62bda1-348f-49e5-bacd-e29aa1fe132b","variable_group_id":"db7a1b4e-30fd-47d7-a9e1-7176e12f03db","key":"path","description":"Path to a file or directory of YAML or  JSON files.\nThis will be used for `kubectl apply` to create a set of Kubernetes resources. Pair this with `templatefile` or `templatedir` [templating functions](/waypoint/docs/waypoint-hcl/functions/template) to inject dynamic elements into your Kubernetes resources. Subdirectories are included recursively.","type":"string","required":true,"default_value":null,"created_at":"2023-03-14T21:14:19.542Z","updated_at":"2023-03-14T21:14:19.542Z"},{"id":"1eb5702f-3010-4972-b11c-ef13dabe7c9c","variable_group_id":"db7a1b4e-30fd-47d7-a9e1-7176e12f03db","key":"prune_allowlist","description":null,"type":"list of string","required":false,"default_value":null,"created_at":"2023-03-14T21:14:19.988Z","updated_at":"2023-03-14T21:14:19.988Z"},{"id":"92743c6a-99b2-4e9c-849b-9643f3ffe8d3","variable_group_id":"db7a1b4e-30fd-47d7-a9e1-7176e12f03db","key":"prune_label","description":"Label selector to prune resources that aren't present in the `path`.\nThis is a label selector that is used to search for any resources that are NOT present in the configured `path` and delete them.","type":"string","required":true,"default_value":null,"created_at":"2023-03-14T21:14:20.314Z","updated_at":"2023-03-14T21:14:20.314Z"}]},{"id":"bb7d38d7-e5d0-41ab-94e9-fc5c79474037","created_at":"2023-03-14T21:14:20.638Z","updated_at":"2023-03-14T21:14:20.638Z","integration_release_component_id":"d9b625c1-f597-4a2d-92f5-f82c0033aa93","variable_group_config":{"id":"917f7cae-7d3e-426c-97e0-cbbda32a6d5a","product_id":"68c85272-e2bf-4330-aa43-4ce4e6d899ee","name":"Outputs","filename":"outputs.hcl","stanza":"output","display_order":2,"created_at":"2022-12-06T21:05:38.392Z","updated_at":"2022-12-06T21:05:38.392Z"},"variables":[{"id":"20e522c2-fcbb-407d-8452-7b787de49c2a","variable_group_id":"bb7d38d7-e5d0-41ab-94e9-fc5c79474037","key":"prune_allowlist","description":null,"type":"list of string","required":null,"default_value":null,"created_at":"2023-03-14T21:14:21.001Z","updated_at":"2023-03-14T21:14:21.001Z"},{"id":"c6bb3021-d775-4912-87da-7f11faa59632","variable_group_id":"bb7d38d7-e5d0-41ab-94e9-fc5c79474037","key":"prune_label","description":null,"type":"string","required":null,"default_value":null,"created_at":"2023-03-14T21:14:21.376Z","updated_at":"2023-03-14T21:14:21.376Z"}]}]},"processedVariablesMarkdown":{"db7a1b4e-30fd-47d7-a9e1-7176e12f03db.context":{"description":{"compiledSource":"var r=Object.defineProperty,l=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var u=Object.getOwnPropertySymbols;var s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;var c=(t,e,o)=>e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,p=(t,e)=>{for(var o in e||(e={}))s.call(e,o)&&c(t,o,e[o]);if(u)for(var o of u(e))a.call(e,o)&&c(t,o,e[o]);return t},y=(t,e)=>l(t,D(e));var i=(t,e)=>{var o={};for(var n in t)s.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&u)for(var n of u(t))e.indexOf(n)<0&&a.call(t,n)&&(o[n]=t[n]);return o};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(o){var n=o,{components:t}=n,e=i(n,[\"components\"]);return mdx(MDXLayout,y(p(p({},layoutProps),e),{components:t,mdxType:\"MDXLayout\"}),mdx(\"p\",p({},{className:\"g-type-long-body\"}),\"The kubectl context to use, as defined in the kubeconfig file.\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"db7a1b4e-30fd-47d7-a9e1-7176e12f03db.kubeconfig":{"description":{"compiledSource":"var c=Object.defineProperty,d=Object.defineProperties;var r=Object.getOwnPropertyDescriptors;var u=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;var i=(e,t,o)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,s=(e,t)=>{for(var o in t||(t={}))p.call(t,o)&&i(e,o,t[o]);if(u)for(var o of u(t))a.call(t,o)&&i(e,o,t[o]);return e},l=(e,t)=>d(e,r(t));var y=(e,t)=>{var o={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&u)for(var n of u(e))t.indexOf(n)<0&&a.call(e,n)&&(o[n]=e[n]);return o};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(o){var n=o,{components:e}=n,t=y(n,[\"components\"]);return mdx(MDXLayout,l(s(s({},layoutProps),t),{components:e,mdxType:\"MDXLayout\"}),mdx(\"p\",s({},{className:\"g-type-long-body\"}),`Path to the kubeconfig file to use.\nIf this isn't set, the default lookup used by `,mdx(\"inlineCode\",{parentName:\"p\"},\"kubectl\"),\" will be used.\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"db7a1b4e-30fd-47d7-a9e1-7176e12f03db.path":{"description":{"compiledSource":"var u=Object.defineProperty,d=Object.defineProperties;var m=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var a=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var l=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,i=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&l(e,n,t[n]);if(r)for(var n of r(t))p.call(t,n)&&l(e,n,t[n]);return e},s=(e,t)=>d(e,m(t));var c=(e,t)=>{var n={};for(var o in e)a.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&r)for(var o of r(e))t.indexOf(o)<0&&p.call(e,o)&&(n[o]=e[o]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var o=n,{components:e}=o,t=c(o,[\"components\"]);return mdx(MDXLayout,s(i(i({},layoutProps),t),{components:e,mdxType:\"MDXLayout\"}),mdx(\"p\",i({},{className:\"g-type-long-body\"}),`Path to a file or directory of YAML or  JSON files.\nThis will be used for `,mdx(\"inlineCode\",{parentName:\"p\"},\"kubectl apply\"),\" to create a set of Kubernetes resources. Pair this with \",mdx(\"inlineCode\",{parentName:\"p\"},\"templatefile\"),\" or \",mdx(\"inlineCode\",{parentName:\"p\"},\"templatedir\"),\" \",mdx(\"a\",i({parentName:\"p\"},{href:\"/waypoint/docs/waypoint-hcl/functions/template\"}),\"templating functions\"),\" to inject dynamic elements into your Kubernetes resources. Subdirectories are included recursively.\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"db7a1b4e-30fd-47d7-a9e1-7176e12f03db.prune_allowlist":{},"db7a1b4e-30fd-47d7-a9e1-7176e12f03db.prune_label":{"description":{"compiledSource":"var c=Object.defineProperty,d=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var a=Object.getOwnPropertySymbols;var s=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var i=(e,t,n)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,r=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&i(e,n,t[n]);if(a)for(var n of a(t))p.call(t,n)&&i(e,n,t[n]);return e},l=(e,t)=>d(e,h(t));var u=(e,t)=>{var n={};for(var o in e)s.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&a)for(var o of a(e))t.indexOf(o)<0&&p.call(e,o)&&(n[o]=e[o]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var o=n,{components:e}=o,t=u(o,[\"components\"]);return mdx(MDXLayout,l(r(r({},layoutProps),t),{components:e,mdxType:\"MDXLayout\"}),mdx(\"p\",r({},{className:\"g-type-long-body\"}),\"Label selector to prune resources that aren't present in the \",mdx(\"inlineCode\",{parentName:\"p\"},\"path\"),`.\nThis is a label selector that is used to search for any resources that are NOT present in the configured `,mdx(\"inlineCode\",{parentName:\"p\"},\"path\"),\" and delete them.\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"bb7d38d7-e5d0-41ab-94e9-fc5c79474037.prune_allowlist":{},"bb7d38d7-e5d0-41ab-94e9-fc5c79474037.prune_label":{}},"anchorLinks":[{"id":"requirements","level":3,"title":"Requirements"},{"id":"artifact-access","level":3,"title":"Artifact Access"},{"id":"entrypoint-functionality","level":3,"title":"Entrypoint Functionality"},{"id":"url-service","level":3,"title":"URL Service"},{"id":"interface","level":3,"title":"Interface"},{"id":"examples","level":3,"title":"Examples"}],"serializedREADME":{"compiledSource":"var m=Object.defineProperty,u=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var r=(a,n,t)=>n in a?m(a,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[n]=t,e=(a,n)=>{for(var t in n||(n={}))o.call(n,t)&&r(a,t,n[t]);if(p)for(var t of p(n))i.call(n,t)&&r(a,t,n[t]);return a},c=(a,n)=>u(a,N(n));var l=(a,n)=>{var t={};for(var s in a)o.call(a,s)&&n.indexOf(s)<0&&(t[s]=a[s]);if(a!=null&&p)for(var s of p(a))n.indexOf(s)<0&&i.call(a,s)&&(t[s]=a[s]);return t};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(t){var s=t,{components:a}=s,n=l(s,[\"components\"]);return mdx(MDXLayout,c(e(e({},layoutProps),n),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Deploy Kubernetes resources directly from a single file or a directory of YAML\nor JSON files.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`This plugin lets you use any pre-existing set of Kubernetes resource files\nto deploy to Kubernetes. This plugin supports all the features of Waypoint.\nYou may use Waypoint's `,mdx(\"a\",e({parentName:\"p\"},{href:\"/waypoint/docs/waypoint-hcl/functions/template\"}),\"templating features\"),`\nto template the resources with information such as the artifact from\na previous build step, entrypoint environment variables, etc.`),mdx(\"h3\",e({},{id:\"user-content-requirements\",\"data-text-content\":\"Requirements\",className:\"g-type-display-4\"}),\"Requirements\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`This plugin requires \"kubectl\" to be installed since this plugin works by\nsubprocessing to \"kubectl apply\". Other Waypoint Kubernetes plugins sometimes\nuse the API directly but this plugin requires \"kubectl\".`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`\"kubectl\" must also be configured to access your Kubernetes cluster. You\nmay specify an alternate kubeconfig file using the \"kubeconfig\" configuration\nparameter. If this isn't specified, the default kubectl lookup paths will be\nused.`),mdx(\"h3\",e({},{id:\"user-content-artifact-access\",\"data-text-content\":\"Artifact Access\",className:\"g-type-display-4\"}),\"Artifact Access\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"You may use Waypoint's \",mdx(\"a\",e({parentName:\"p\"},{href:\"/waypoint/docs/waypoint-hcl/functions/template\"}),\"templating features\"),`\nto access information such as the artifact from the build or push stages.\nAn example below shows this by using `,mdx(\"inlineCode\",{parentName:\"p\"},\"templatedir\"),` mixed with\nvariables such as `,mdx(\"inlineCode\",{parentName:\"p\"},\"artifact.image\"),` to dynamically configure the\nDocker image within a Kubernetes Deployment.`),mdx(\"h3\",e({},{id:\"user-content-entrypoint-functionality\",\"data-text-content\":\"Entrypoint Functionality\",className:\"g-type-display-4\"}),\"Entrypoint Functionality\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Waypoint \",mdx(\"a\",e({parentName:\"p\"},{href:\"/waypoint/docs/entrypoint#functionality\"}),\"entrypoint functionality\"),` such\nas logs, exec, app configuration, and more require two properties to be true:`),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),`The running image must already have the Waypoint entrypoint installed\nand configured as the entrypoint. This should happen in the build stage.`)),mdx(\"li\",{parentName:\"ol\"},mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),`Proper environment variables must be set so the entrypoint knows how\nto communicate to the Waypoint server. `,mdx(\"strong\",{parentName:\"p\"},`This step happens in this\ndeployment stage.`)))),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Step 2 does not happen automatically.\"),` You must manually set the entrypoint\nenvironment variables using the `,mdx(\"a\",e({parentName:\"p\"},{href:\"/waypoint/docs/waypoint-hcl/functions/template\"}),\"templating feature\"),`.\nOne of the examples below shows the entrypoint environment variables being\ninjected.`),mdx(\"h3\",e({},{id:\"user-content-url-service\",\"data-text-content\":\"URL Service\",className:\"g-type-display-4\"}),\"URL Service\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`If you want your workload to be accessible by the\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/waypoint/docs/url\"}),\"Waypoint URL service\"),`, you must set the PORT environment variable\nwithin the pod with your web service and also be using the Waypoint\nentrypoint (documented in the previous section).`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`The PORT environment variable should be the port that your web service\nis listening on that the URL service will connect to. See one of the examples\nbelow for more details.`),mdx(\"h3\",e({},{id:\"user-content-interface\",\"data-text-content\":\"Interface\",className:\"g-type-display-4\"}),\"Interface\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Input: \",mdx(\"strong\",{parentName:\"li\"},\"None\")),mdx(\"li\",{parentName:\"ul\"},\"Output: \",mdx(\"strong\",{parentName:\"li\"},\"k8sapply.Deployment\"))),mdx(\"h3\",e({},{id:\"user-content-examples\",\"data-text-content\":\"Examples\",className:\"g-type-display-4\"}),\"Examples\"),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"// The waypoint.hcl file\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"deploy\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  use \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"kubernetes-apply\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"// Templated to perhaps bring in the artifact from a previous\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"// build/registry, entrypoint env vars, etc.\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"path\"),\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" templatedir(\",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",e({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token keyword\"}),\"path\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token type variable\"}),\"app\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'/k8s\"'),\")\",`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"prune_label\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"app=myapp\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"prune_allowlist\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"apps/v1/Deployment\"'),\",\",`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"apps/v1/ReplicaSet\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"// ./k8s/deployment.yaml\"),`\n`,\"apiVersion: apps/v1\",`\n`,\"kind: Deployment\",`\n`,\"metadata:\",`\n`,\"  name: my-deployment\",`\n`,\"  labels:\",`\n`,\"    app: myapp\",`\n`,\"spec:\",`\n`,\"  replicas: \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"3\"),`\n`,\"  selector:\",`\n`,\"    matchLabels:\",`\n`,\"      app: myapp\",`\n`,\"  template:\",`\n`,\"    metadata:\",`\n`,\"      labels:\",`\n`,\"        app: myapp\",`\n`,\"    spec:\",`\n`,\"      containers:\",`\n`,\"      - name: myapp\",`\n`,\"        image: $\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\"artifact.image\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),\":$\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\"artifact.tag\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"        env:\",`\n`,\"          %\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\" for k,v in entrypoint.env ~\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"          - name: $\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\"k\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"            value: \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",e({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),\"v\",mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,\"          %\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\" endfor ~\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,\"          \",mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Ensure we set PORT for the URL service. This is only necessary\"),`\n`,\"          \",mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# if we want the URL service to function.\"),`\n`,\"          - name: PORT\",`\n`,\"            value: \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"3000\"'),`\n`)))}MDXContent.isMDXComponent=!0;\n","scope":{}},"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Waypoint","url":"/waypoint"},{"title":"Integrations","url":"/waypoint/integrations"},{"title":"Kubernetes Apply","url":"/waypoint/integrations/hashicorp/kubernetes-apply","isCurrentPage":false},{"title":"v0.11.0","url":"/waypoint/integrations/hashicorp/kubernetes-apply/v0.11.0","isCurrentPage":false},{"title":"Components"},{"title":"Platform"},{"title":"Kubernetes Apply Platform","url":"/waypoint/integrations/hashicorp/kubernetes-apply/latest/components/platform/kubernetes-apply-platform","isCurrentPage":true}]},"__N_SSG":true}