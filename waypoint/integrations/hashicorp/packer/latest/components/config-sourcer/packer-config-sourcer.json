{"pageProps":{"metadata":{"title":"Packer Config Sourcer | Integrations"},"product":{"name":"Waypoint","slug":"waypoint","algoliaConfig":{"indexName":"product_WAYPOINT","searchOnlyApiKey":"5e4adfd8094367056501547d6fedb6c5"},"analyticsConfig":{"includedDomains":"waypointproject.io www.waypointproject.io","segmentWriteKey":"9mlIVayJbNtJW2EOdAFKHNKcdLAgEDlV"},"metadata":{"title":"Waypoint by HashiCorp","description":"Waypoint provides a modern workflow for build, deploy, and release across platforms.","image":"https://www.waypointproject.io/waypoint-public/img/og-image.png","icon":[{"href":"/waypoint-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiConf","url":"https://hashiconf.com/2023?utm_source=direct&utm_medium=banner&utm_campaign=23Q3_HASHICONFGLOBAL_EVENT&utm_content=&utm_offer=event","text":"Our community conference is taking place in San Francisco and online October 10-12.","linkText":"Register now","expirationDate":""},"subnavItems":[{"text":"Overview","url":"/","type":"inbound"},{"text":"Tutorials","url":"https://developer.hashicorp.com/waypoint/tutorials","type":"inbound"},{"text":"Docs","url":"https://developer.hashicorp.com/waypoint/docs","type":"inbound"},{"text":"CLI","url":"https://developer.hashicorp.com/waypoint/commands","type":"inbound"},{"text":"Integrations","url":"https://developer.hashicorp.com/waypoint/integrations","type":"inbound"},{"text":"Community","url":"/community","type":"inbound"}],"basePaths":["commands","docs","plugins","tutorials","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs","includeMDXSource":true},{"iconName":"api","name":"API","path":"api-docs"},{"iconName":"terminal-screen","name":"CLI","path":"commands"}],"integrationsConfig":{"description":"A curated collection of official, partner, and community Waypoint Integrations."}},"integration":{"id":"5a406b38-9fff-478a-b330-35c1b64c60fd","slug":"packer","name":"Packer","description":"The Packer plugin retrieves the image ID of an image whose metadata is pushed to an HCP Packer registry. The image ID is that of the HCP Packer bucket iteration assigned to the configured channel, with a matching cloud provider and region.","license_type":"MPL-2.0","license_url":"https://github.com/hashicorp/waypoint/blob/main/LICENSE","external_only":false,"external_url":null,"tier":"official","repo_url":"https://github.com/hashicorp/waypoint","subdirectory":"/builtin/packer","created_at":"2023-02-03T18:34:03.712Z","updated_at":"2023-02-03T19:21:50.346Z","hide_versions":false,"organization":{"id":"a4a0551a-1451-4d89-9f56-8031c8350c77","slug":"hashicorp","created_at":"2022-11-09T22:56:32.391Z","updated_at":"2022-11-09T22:56:32.391Z"},"product":{"id":"68c85272-e2bf-4330-aa43-4ce4e6d899ee","slug":"waypoint","name":"Waypoint","created_at":"2022-11-09T22:56:30.388Z","updated_at":"2022-11-09T22:56:30.388Z"},"versions":["0.11.0"],"components":[{"id":"772fd321-ac4c-4eed-b238-c351725da0f6","slug":"config-sourcer","name":"Config Sourcer","plural_name":"Config Sourcers"}],"flags":[{"id":"d2a85dd2-1cca-4ce9-8f88-fef3c8dd0510","slug":"builtin","name":"Built-in","description":"This integration is shipped in the core product and does not need to be installed.","created_at":"2022-11-09T22:56:30.770Z","updated_at":"2023-01-27T18:33:54.665Z"}],"integration_type":null},"activeRelease":{"id":"8cec7b28-234c-4780-9eb3-e18ddf9d4609","integration_id":"5a406b38-9fff-478a-b330-35c1b64c60fd","version":"0.11.0","readme":"The Packer plugin retrieves the image ID of an image whose metadata is pushed\nto an [HCP Packer](https://cloud.hashicorp.com/products/packer) registry. The\nimage ID is that of the HCP Packer bucket iteration assigned to the configured\nchannel, with a matching cloud provider and region.\n\n### Components\n\n1. [ConfigSourcer](/waypoint/integrations/hashicorp/packer/latest/components/config-sourcer/packer-config-sourcer)\n","created_at":"2023-02-13T19:45:25.722Z","updated_at":"2023-04-04T18:44:50.102Z","components":[{"id":"ac64f160-4c9d-4f88-8d17-101a15bb8161","integration_release_id":"8cec7b28-234c-4780-9eb3-e18ddf9d4609","component_id":"772fd321-ac4c-4eed-b238-c351725da0f6","readme":"<!-- This file was generated via `make gen/integrations-hcl` -->\nRetrieve the image ID of an image whose metadata is pushed to an HCP Packer registry. The image ID is that of the HCP Packer bucket iteration assigned to the configured channel, with a matching cloud provider and region.\n\n### Examples\n\n```hcl\n// The waypoint.hcl file\nproject = \"example-reactjs-project\"\n\nvariable \"image\" {\n  default = dynamic(\"packer\", {\n    bucket          = \"nginx\"\n    channel         = \"base\"\n    region          = \"docker\"\n    cloud_provider  = \"docker\"\n  }\n  type = string\n  description = \"The name of the base image to use for building app Docker images.\"\n}\n\napp \"example-reactjs\" {\n  build {\n    use \"docker\" {\n      dockerfile = templatefile(\"${path.app}\"/Dockerfile, {\n        base_image = var.image\n      }\n    }\n\n  deploy {\n    use \"docker\" {}\n  }\n}\n\n\n# Multi-stage Dockerfile example\nFROM node:19.2-alpine as build\nWORKDIR /app\nENV PATH /app/node_modules/.bin:$PATH\nCOPY package.json ./\nCOPY package-lock.json ./\nRUN npm ci --silent\nRUN npm install react-scripts@3.4.1 -g --silent\nCOPY . ./\nRUN npm run build\n\n# ${base_image} below is the Docker repository and tag, templated to the Dockerfile\nFROM ${base_image}\nCOPY nginx/default.conf /etc/nginx/conf.d/\nCOPY --from=build /app/build /usr/share/nginx/html\nEXPOSE 80\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n```\n\n","created_at":"2023-03-14T21:14:29.160Z","updated_at":"2023-03-14T21:14:29.160Z","name":"Packer Config Sourcer","slug":"packer-config-sourcer","component":{"id":"772fd321-ac4c-4eed-b238-c351725da0f6","slug":"config-sourcer","name":"Config Sourcer","plural_name":"Config Sourcers","product_id":"68c85272-e2bf-4330-aa43-4ce4e6d899ee","created_at":"2022-11-09T22:56:31.664Z","updated_at":"2022-11-09T22:56:31.664Z"},"variable_groups":[{"id":"658609c6-e07c-4fe6-9781-7ab98ae34a48","created_at":"2023-03-14T21:14:29.790Z","updated_at":"2023-03-14T21:14:29.790Z","integration_release_component_id":"ac64f160-4c9d-4f88-8d17-101a15bb8161","variable_group_config":{"id":"263c5c35-8751-466c-aa7a-7f1a76973bd6","product_id":"68c85272-e2bf-4330-aa43-4ce4e6d899ee","name":"Parameters","filename":"parameters.hcl","stanza":"parameter","display_order":1,"created_at":"2022-12-06T21:05:38.246Z","updated_at":"2022-12-06T21:05:38.246Z"},"variables":[{"id":"1ab02b87-96d5-4377-b65c-14583df5e933","variable_group_id":"658609c6-e07c-4fe6-9781-7ab98ae34a48","key":"client_id","description":"The OAuth2 Client ID for HCP API operations.","type":"string","required":false,"default_value":null,"created_at":"2023-03-14T21:14:30.129Z","updated_at":"2023-03-14T21:14:30.129Z"},{"id":"b397b934-47a2-4a61-9053-6ae26139e182","variable_group_id":"658609c6-e07c-4fe6-9781-7ab98ae34a48","key":"client_secret","description":"The OAuth2 Client Secret for HCP API operations.","type":"string","required":false,"default_value":null,"created_at":"2023-03-14T21:14:30.465Z","updated_at":"2023-03-14T21:14:30.465Z"},{"id":"e8607baf-67cd-45fa-a3ab-afc97e3d4621","variable_group_id":"658609c6-e07c-4fe6-9781-7ab98ae34a48","key":"organization_id","description":"The HCP organization ID.","type":"string","required":true,"default_value":null,"created_at":"2023-03-14T21:14:30.788Z","updated_at":"2023-03-14T21:14:30.788Z"},{"id":"c34b9ffb-0e1b-4dcf-9ae9-d4a832ae1512","variable_group_id":"658609c6-e07c-4fe6-9781-7ab98ae34a48","key":"project_id","description":"The HCP Project ID.","type":"string","required":true,"default_value":null,"created_at":"2023-03-14T21:14:31.117Z","updated_at":"2023-03-14T21:14:31.117Z"}]}]}]},"component":{"id":"ac64f160-4c9d-4f88-8d17-101a15bb8161","integration_release_id":"8cec7b28-234c-4780-9eb3-e18ddf9d4609","component_id":"772fd321-ac4c-4eed-b238-c351725da0f6","readme":"<!-- This file was generated via `make gen/integrations-hcl` -->\nRetrieve the image ID of an image whose metadata is pushed to an HCP Packer registry. The image ID is that of the HCP Packer bucket iteration assigned to the configured channel, with a matching cloud provider and region.\n\n### Examples\n\n```hcl\n// The waypoint.hcl file\nproject = \"example-reactjs-project\"\n\nvariable \"image\" {\n  default = dynamic(\"packer\", {\n    bucket          = \"nginx\"\n    channel         = \"base\"\n    region          = \"docker\"\n    cloud_provider  = \"docker\"\n  }\n  type = string\n  description = \"The name of the base image to use for building app Docker images.\"\n}\n\napp \"example-reactjs\" {\n  build {\n    use \"docker\" {\n      dockerfile = templatefile(\"${path.app}\"/Dockerfile, {\n        base_image = var.image\n      }\n    }\n\n  deploy {\n    use \"docker\" {}\n  }\n}\n\n\n# Multi-stage Dockerfile example\nFROM node:19.2-alpine as build\nWORKDIR /app\nENV PATH /app/node_modules/.bin:$PATH\nCOPY package.json ./\nCOPY package-lock.json ./\nRUN npm ci --silent\nRUN npm install react-scripts@3.4.1 -g --silent\nCOPY . ./\nRUN npm run build\n\n# ${base_image} below is the Docker repository and tag, templated to the Dockerfile\nFROM ${base_image}\nCOPY nginx/default.conf /etc/nginx/conf.d/\nCOPY --from=build /app/build /usr/share/nginx/html\nEXPOSE 80\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n```\n\n","created_at":"2023-03-14T21:14:29.160Z","updated_at":"2023-03-14T21:14:29.160Z","name":"Packer Config Sourcer","slug":"packer-config-sourcer","component":{"id":"772fd321-ac4c-4eed-b238-c351725da0f6","slug":"config-sourcer","name":"Config Sourcer","plural_name":"Config Sourcers","product_id":"68c85272-e2bf-4330-aa43-4ce4e6d899ee","created_at":"2022-11-09T22:56:31.664Z","updated_at":"2022-11-09T22:56:31.664Z"},"variable_groups":[{"id":"658609c6-e07c-4fe6-9781-7ab98ae34a48","created_at":"2023-03-14T21:14:29.790Z","updated_at":"2023-03-14T21:14:29.790Z","integration_release_component_id":"ac64f160-4c9d-4f88-8d17-101a15bb8161","variable_group_config":{"id":"263c5c35-8751-466c-aa7a-7f1a76973bd6","product_id":"68c85272-e2bf-4330-aa43-4ce4e6d899ee","name":"Parameters","filename":"parameters.hcl","stanza":"parameter","display_order":1,"created_at":"2022-12-06T21:05:38.246Z","updated_at":"2022-12-06T21:05:38.246Z"},"variables":[{"id":"1ab02b87-96d5-4377-b65c-14583df5e933","variable_group_id":"658609c6-e07c-4fe6-9781-7ab98ae34a48","key":"client_id","description":"The OAuth2 Client ID for HCP API operations.","type":"string","required":false,"default_value":null,"created_at":"2023-03-14T21:14:30.129Z","updated_at":"2023-03-14T21:14:30.129Z"},{"id":"b397b934-47a2-4a61-9053-6ae26139e182","variable_group_id":"658609c6-e07c-4fe6-9781-7ab98ae34a48","key":"client_secret","description":"The OAuth2 Client Secret for HCP API operations.","type":"string","required":false,"default_value":null,"created_at":"2023-03-14T21:14:30.465Z","updated_at":"2023-03-14T21:14:30.465Z"},{"id":"e8607baf-67cd-45fa-a3ab-afc97e3d4621","variable_group_id":"658609c6-e07c-4fe6-9781-7ab98ae34a48","key":"organization_id","description":"The HCP organization ID.","type":"string","required":true,"default_value":null,"created_at":"2023-03-14T21:14:30.788Z","updated_at":"2023-03-14T21:14:30.788Z"},{"id":"c34b9ffb-0e1b-4dcf-9ae9-d4a832ae1512","variable_group_id":"658609c6-e07c-4fe6-9781-7ab98ae34a48","key":"project_id","description":"The HCP Project ID.","type":"string","required":true,"default_value":null,"created_at":"2023-03-14T21:14:31.117Z","updated_at":"2023-03-14T21:14:31.117Z"}]}]},"processedVariablesMarkdown":{"658609c6-e07c-4fe6-9781-7ab98ae34a48.client_id":{"description":{"compiledSource":"var c=Object.defineProperty,M=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;var u=(o,t,n)=>t in o?c(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,a=(o,t)=>{for(var n in t||(t={}))r.call(t,n)&&u(o,n,t[n]);if(p)for(var n of p(t))s.call(t,n)&&u(o,n,t[n]);return o},y=(o,t)=>M(o,X(t));var D=(o,t)=>{var n={};for(var e in o)r.call(o,e)&&t.indexOf(e)<0&&(n[e]=o[e]);if(o!=null&&p)for(var e of p(o))t.indexOf(e)<0&&s.call(o,e)&&(n[e]=o[e]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var e=n,{components:o}=e,t=D(e,[\"components\"]);return mdx(MDXLayout,y(a(a({},layoutProps),t),{components:o,mdxType:\"MDXLayout\"}),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"The OAuth2 Client ID for HCP API operations.\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"658609c6-e07c-4fe6-9781-7ab98ae34a48.client_secret":{"description":{"compiledSource":"var D=Object.defineProperty,M=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;var u=(o,t,e)=>t in o?D(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,r=(o,t)=>{for(var e in t||(t={}))a.call(t,e)&&u(o,e,t[e]);if(p)for(var e of p(t))s.call(t,e)&&u(o,e,t[e]);return o},y=(o,t)=>M(o,X(t));var c=(o,t)=>{var e={};for(var n in o)a.call(o,n)&&t.indexOf(n)<0&&(e[n]=o[n]);if(o!=null&&p)for(var n of p(o))t.indexOf(n)<0&&s.call(o,n)&&(e[n]=o[n]);return e};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(e){var n=e,{components:o}=n,t=c(n,[\"components\"]);return mdx(MDXLayout,y(r(r({},layoutProps),t),{components:o,mdxType:\"MDXLayout\"}),mdx(\"p\",r({},{className:\"g-type-long-body\"}),\"The OAuth2 Client Secret for HCP API operations.\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"658609c6-e07c-4fe6-9781-7ab98ae34a48.organization_id":{"description":{"compiledSource":"var c=Object.defineProperty,M=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var a=Object.getOwnPropertySymbols;var r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;var u=(o,t,n)=>t in o?c(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,p=(o,t)=>{for(var n in t||(t={}))r.call(t,n)&&u(o,n,t[n]);if(a)for(var n of a(t))s.call(t,n)&&u(o,n,t[n]);return o},y=(o,t)=>M(o,X(t));var D=(o,t)=>{var n={};for(var e in o)r.call(o,e)&&t.indexOf(e)<0&&(n[e]=o[e]);if(o!=null&&a)for(var e of a(o))t.indexOf(e)<0&&s.call(o,e)&&(n[e]=o[e]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var e=n,{components:o}=e,t=D(e,[\"components\"]);return mdx(MDXLayout,y(p(p({},layoutProps),t),{components:o,mdxType:\"MDXLayout\"}),mdx(\"p\",p({},{className:\"g-type-long-body\"}),\"The HCP organization ID.\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"658609c6-e07c-4fe6-9781-7ab98ae34a48.project_id":{"description":{"compiledSource":"var D=Object.defineProperty,M=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;var u=(o,t,n)=>t in o?D(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,a=(o,t)=>{for(var n in t||(t={}))r.call(t,n)&&u(o,n,t[n]);if(p)for(var n of p(t))s.call(t,n)&&u(o,n,t[n]);return o},y=(o,t)=>M(o,X(t));var c=(o,t)=>{var n={};for(var e in o)r.call(o,e)&&t.indexOf(e)<0&&(n[e]=o[e]);if(o!=null&&p)for(var e of p(o))t.indexOf(e)<0&&s.call(o,e)&&(n[e]=o[e]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var e=n,{components:o}=e,t=c(e,[\"components\"]);return mdx(MDXLayout,y(a(a({},layoutProps),t),{components:o,mdxType:\"MDXLayout\"}),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"The HCP Project ID.\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}}},"anchorLinks":[{"id":"examples","level":3,"title":"Examples"}],"serializedREADME":{"compiledSource":"var l=Object.defineProperty,i=Object.defineProperties;var d=Object.getOwnPropertyDescriptors;var t=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;var m=(e,n,s)=>n in e?l(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,a=(e,n)=>{for(var s in n||(n={}))o.call(n,s)&&m(e,s,n[s]);if(t)for(var s of t(n))c.call(n,s)&&m(e,s,n[s]);return e},r=(e,n)=>i(e,d(n));var N=(e,n)=>{var s={};for(var p in e)o.call(e,p)&&n.indexOf(p)<0&&(s[p]=e[p]);if(e!=null&&t)for(var p of t(e))n.indexOf(p)<0&&c.call(e,p)&&(s[p]=e[p]);return s};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(s){var p=s,{components:e}=p,n=N(p,[\"components\"]);return mdx(MDXLayout,r(a(a({},layoutProps),n),{components:e,mdxType:\"MDXLayout\"}),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Retrieve the image ID of an image whose metadata is pushed to an HCP Packer registry. The image ID is that of the HCP Packer bucket iteration assigned to the configured channel, with a matching cloud provider and region.\"),mdx(\"h3\",a({},{id:\"user-content-examples\",\"data-text-content\":\"Examples\",className:\"g-type-display-4\"}),\"Examples\"),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"// The waypoint.hcl file\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"project\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"example-reactjs-project\"'),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"image\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" dynamic(\",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"packer\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"bucket\"),\"          \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"nginx\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"channel\"),\"         \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"base\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"region\"),\"          \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"docker\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"cloud_provider\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"docker\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"description\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"The name of the base image to use for building app Docker images.\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,\"app \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"example-reactjs\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"build\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    use \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"docker\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"dockerfile\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" templatefile(\",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"path\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"app\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),\"/Dockerfile, \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"base_image\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" var.image\",`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"deploy\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    use \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"docker\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"# Multi-stage Dockerfile example\"),`\n`,\"FROM node:\",mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"19.2\"),\"-alpine as build\",`\n`,\"WORKDIR /app\",`\n`,\"ENV PATH /app/node_modules/.bin:$PATH\",`\n`,\"COPY package.json ./\",`\n`,\"COPY package-lock.json ./\",`\n`,\"RUN npm ci --silent\",`\n`,\"RUN npm install react-scripts@\",mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"3.4\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"1\"),\" -g --silent\",`\n`,\"COPY . ./\",`\n`,\"RUN npm run build\",`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"# ${base_image} below is the Docker repository and tag, templated to the Dockerfile\"),`\n`,\"FROM $\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\"base_image\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"COPY nginx/default.conf /etc/nginx/conf.d/\",`\n`,\"COPY \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"--from\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\"build /app/build /usr/share/nginx/html\",`\n`,\"EXPOSE \",mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"80\"),`\n`,\"CMD \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"nginx\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"-g\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"daemon off;\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`)))}MDXContent.isMDXComponent=!0;\n","scope":{}},"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Waypoint","url":"/waypoint"},{"title":"Integrations","url":"/waypoint/integrations"},{"title":"Packer","url":"/waypoint/integrations/hashicorp/packer","isCurrentPage":false},{"title":"v0.11.0","url":"/waypoint/integrations/hashicorp/packer/v0.11.0","isCurrentPage":false},{"title":"Components"},{"title":"Config Sourcer"},{"title":"Packer Config Sourcer","url":"/waypoint/integrations/hashicorp/packer/latest/components/config-sourcer/packer-config-sourcer","isCurrentPage":true}]},"__N_SSG":true}